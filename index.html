<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>DESPACHOS Twins</title>
    <style>
        :root {
            --blue: #004a99;
            --green: #8cc63f;
            --light: #f1f5f9;
        }
        body { 
            font-family: sans-serif; margin: 0; padding: 0; 
            background-color: white; color: #333;
        }
        .page { display: none; padding: 20px; box-sizing: border-box; min-height: 100vh; }
        .active { display: block !important; }

        /* Pantalla 1: Inicio */
        #p1 { text-align: center; padding-top: 60px; }
        .logo-container { margin-bottom: 20px; }
        .logo-container img { width: 200px; height: auto; }
        h1 { color: var(--blue); font-size: 24px; margin-bottom: 40px; }

        /* Botones */
        .btn {
            display: block; width: 100%; max-width: 280px; margin: 10px auto;
            padding: 15px; border-radius: 12px; border: 2px solid var(--blue);
            background: white; color: var(--blue); font-weight: bold; font-size: 16px;
            cursor: pointer; text-decoration: none;
        }
        .btn:active { background: var(--blue); color: white; }
        .btn-fill { background: var(--blue); color: white; border: none; }
        .btn-green { background: var(--green); color: white; border: none; margin-top: 20px; }

        /* Registro */
        .card { background: var(--light); padding: 15px; border-radius: 15px; margin-bottom: 15px; border: 1px solid #e2e8f0; }
        input, select { 
            width: 100%; padding: 12px; margin: 8px 0; border-radius: 8px; 
            border: 1px solid #ccc; font-size: 16px; box-sizing: border-box;
        }
        .banner { background: var(--blue); color: white; padding: 20px; border-radius: 15px; text-align: center; }
        
        /* Footer */
        .footer { position: fixed; bottom: 20px; width: 100%; text-align: center; color: var(--blue); font-size: 12px; font-weight: bold; }
    </style>
</head>
<body>

    <div id="p1" class="page active">
        <div class="logo-container">
            <img src="https://tajho.github.io/Despachos/logo.png" alt="Logo Twins">
        </div>
        <h1>DESPACHOS</h1>
        
        <div style="margin-top: 20px;">
            <button class="btn" onclick="entrar('TAJHO')">ENTRAR COMO TAJHO</button>
            <button class="btn" onclick="entrar('FRANCESCO')">ENTRAR COMO FRANCESCO</button>
            <button class="btn" onclick="entrar('OSCAR')">ENTRAR COMO OSCAR</button>
        </div>

        <div class="footer">
            By Tajho Developer
        </div>
    </div>

    <div id="p2" class="page">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
            <b id="user-name" style="color: var(--blue)"></b>
            <button onclick="window.location.reload()" style="border: none; background: none; color: red; font-weight: bold;">SALIR</button>
        </div>

        <div class="banner">
            <small>CAJAS TOTALES</small>
            <div id="total-cajas" style="font-size: 40px; font-weight: 800;">0</div>
        </div>

        <div class="card" style="margin-top: 15px;">
            <input type="text" id="cliente" placeholder="Nombre del Cliente">
            <input type="number" id="cantidad" placeholder="Cant. Cajas" inputmode="numeric">
            <button class="btn btn-fill" style="max-width: 100%;" onclick="agregarItem()">+ AÃ‘ADIR</button>
        </div>

        <div id="seccion-envio" style="display: none;">
            <div id="lista-items" class="card" style="font-size: 14px;"></div>
            <select id="chofer">
                <option value="">Â¿QuiÃ©n conduce?</option>
                <option value="LUIS H.">LUIS H.</option>
                <option value="ROMARIO">ROMARIO</option>
                <option value="CESAR C.">CESAR C.</option>
                <option value="WALDIR">WALDIR</option>
                <option value="MARCELO">MARCELO</option>
                <option value="TAJHO">TAJHO</option>
            </select>
            <select id="auxiliar">
                <option value="">Â¿QuiÃ©n es auxiliar?</option>
                <option value="CRISTOPHER">CRISTOPHER</option>
                <option value="LUIS PLACIDO">LUIS PLACIDO</option>
                <option value="RODOLFO">RODOLFO</option>
                <option value="ELIO">ELIO</option>
                <option value="PERCY">PERCY</option>
                <option value="MARTIN">MARTIN</option>
                <option value="JOFER">JOFER</option>
            </select>
            <select id="placa">
                <option value="">Placa...</option>
                <option value="BUL742">BUL742</option>
                <option value="BPN104">BPN104</option>
            </select>
            <button class="btn btn-green" style="max-width: 100%;" onclick="enviar(true)">ENVIAR A WHATSAPP</button>
        </div>
    </div>

    <script>
        let ruta = [];
        let operario = "";

        // FunciÃ³n para cambiar de pÃ¡gina
        function irA(pagina) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(pagina).classList.add('active');
        }

        // Login
        function entrar(nombre) {
            operario = nombre;
            document.getElementById('user-name').innerText = "HOLA, " + nombre;
            irA('p2');
        }

        // Agregar clientes
        function agregarItem() {
            let cli = document.getElementById('cliente').value;
            let can = parseInt(document.getElementById('cantidad').value);
            
            if(cli == "" || isNaN(can)) {
                alert("Escribe el cliente y la cantidad");
                return;
            }

            ruta.push({c: cli.toUpperCase(), q: can});
            actualizarInterfaz();
            
            document.getElementById('cliente').value = "";
            document.getElementById('cantidad').value = "";
        }

        function actualizarInterfaz() {
            let lista = document.getElementById('lista-items');
            let totalDiv = document.getElementById('total-cajas');
            let suma = 0;
            
            lista.innerHTML = "";
            ruta.forEach((item, index) => {
                suma += item.q;
                lista.innerHTML += `<div style="padding: 5px 0; border-bottom: 1px solid #ccc;">${item.c} - ${item.q} CJ</div>`;
            });

            totalDiv.innerText = suma;
            document.getElementById('seccion-envio').style.display = ruta.length > 0 ? 'block' : 'none';
        }

        // Enviar Reporte
        function enviar(esWhatsapp) {
            let cho = document.getElementById('chofer').value;
            let aux = document.getElementById('auxiliar').value;
            let pla = document.getElementById('placa').value;

            if(!cho || !aux || !pla) {
                alert("Selecciona Chofer, Auxiliar y Placa");
                return;
            }

            let total = document.getElementById('total-cajas').innerText;
            let msg = `*DESPACHO TWINS*\nðŸ‘¤ Op: ${operario}\nðŸšš Ch: ${cho}\nðŸš› Pl: ${pla}\nðŸƒ Aux: ${aux}\n----------\n`;
            
            ruta.forEach(i => { msg += `â€¢ ${i.c}: ${i.q} CJ\n`; });
            msg += `----------\nTOTAL: ${total} CAJAS`;

            window.open(`https://wa.me/?text=${encodeURIComponent(msg)}`);
            
            // Limpiar todo despuÃ©s de enviar
            ruta = [];
            actualizarInterfaz();
            alert("Â¡Reporte enviado!");
        }
    </script>
</body>
</html>
